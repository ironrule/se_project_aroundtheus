!function(){"use strict";class t{constructor(t,e,s){this.name=t.name,this.link=t.link,this._cardSelector=e,this._handleImageClick=s}renderCard(){return this.cardElement=this._getTemplate(),this.cardElement.querySelector(".card__title").textContent=this.name,this.cardImageElement=this.cardElement.querySelector(".card__image"),this.likeButton=this.cardElement.querySelector(".card__like-button"),this.deleteButton=this.cardElement.querySelector(".card__delete-button"),this.cardImageElement.src=this.link,this.cardImageElement.alt=this.name,this._setEventListeners(),this.cardElement}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_setEventListeners(){this.cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this)})),this.likeButton.addEventListener("click",this._handleLikeButton),this.deleteButton.addEventListener("click",this._handleDeleteButton)}_handleDeleteButton=()=>{this.cardElement.remove(),this.cardElement=null};_handleLikeButton=()=>{this.likeButton.classList.toggle("card__like-button_active")}}class e{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formEl=e}enableValidation(){this._formEl.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((t=>{this._hideInputError(t)}))}_hasInvalidInput(){return!this._inputEls.every((t=>t.validity.valid))}_checkInputValidity(t){if(!t.validity.valid)return this._showInputError(t);this._hideInputError(t)}_showInputError(t){const e=this._formEl.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._formEl.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent=null,e.classList.remove(this._errorClass)}_toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}}class s{constructor(t){this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(t=>{(t.target.classList.contains("modal_opened")||t.target.classList.contains("modal__close"))&&this.close()}))}}class n extends s{constructor(t,e){super(t),this._formInputs=this._popupElement.querySelectorAll(".modal__input"),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=e,this._handleSubmit=this._handleSubmit.bind(this)}_handleSubmit(t){t.preventDefault();const e=this._getInputValues();this._handleFormSubmit(e),this.close(),this._popupForm.reset()}_getInputValues(){return this._inputData={},this._formInputs.forEach((t=>{this._inputData[t.name]=t.value})),this._inputData}setInputValues(t){this._formInputs.forEach((e=>{e.value=t[e.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this._handleSubmit)}}const i=document.querySelector(".profile__edit-button"),r="#card-template",o=document.querySelector(".card__container"),a=document.querySelector(".profile__add-button"),l=new class{constructor(t){this._profileName=document.querySelector(t.name),this._profileDescription=document.querySelector(t.description)}getUserInfo(){return{title:this._profileName.textContent,description:this._profileDescription.textContent}}setUserInfo(t){let{name:e,description:s}=t;this._profileName.textContent=e,this._profileDescription.textContent=s}}({name:".profile__name",description:".profile__description"}),c=new n("#modal__profile",(function(t){l.setUserInfo({name:t.title,description:t.description})})),u=new class{constructor(t,e){let{items:s,renderer:n}=t;this._cardContainer=e,this._items=s,this._renderer=n}renderItems(){this._items.forEach((t=>{this._renderer(t,"append")}))}addItem(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";this._cardContainer[e](t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";const n=new t(e,r,_).renderCard();u.addItem(n,s)}},o),d=new n("#modal__add-card",(function(e){const s={name:e.title,link:e.url},n=new t(s,r,_);u.addItem(n.renderCard(),"prepend")})),m=new class extends s{constructor(t){super(t),this.imagePreview=this._popupElement.querySelector(".modal__preview-image"),this.imageCaption=this._popupElement.querySelector(".modal__preview-caption")}open(t){this.imagePreview.src=t.link,this.imagePreview.alt=t.name,this.imageCaption.textContent=t.name,super.open()}}("#modal__preview-wrapper");u.renderItems();const h={};function _(t){m.open(t)}var p;p={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",formSelector:".modal__form"},Array.from(document.querySelectorAll(p.formSelector)).forEach((t=>{const s=new e(p,t),n=t.getAttribute("name");h[n]=s,s.enableValidation()})),i.addEventListener("click",(function(){const t=l.getUserInfo();c.setInputValues(t),h["profile-form"].resetValidation(),c.open()})),a.addEventListener("click",(()=>{h["card-form"].resetValidation(),d.open()})),m.setEventListeners(),c.setEventListeners(),d.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MEUsRUFBV0QsRUFBU0ssY0FDMUJJLEVBQWlCYixlQUFlSyxHQUNoQzRCLEVBQWUsZ0JBQWdCL0Usa0JBQy9CMkQsRUFBaUJsQyxNQUNuQixJQUNBd0IsRUFBZXhFLGlCQUFpQixTQUFTLEtBQ3ZDc0csRUFBZSxhQUFhL0Usa0JBQzVCeUUsRUFBY2hELE1BQU0sSUFFdEJtRCxFQUFlL0Msb0JBQ2Y4QixFQUFpQjlCLG9CQUNqQjRDLEVBQWM1QyxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLmxpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIHJlbmRlckNhcmQoKSB7XHJcbiAgICB0aGlzLmNhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcclxuICAgIHRoaXMuY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMubGlrZUJ1dHRvbiA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuZGVsZXRlQnV0dG9uID0gdGhpcy5jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLmNhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5saW5rO1xyXG4gICAgdGhpcy5jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMubmFtZTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24pO1xyXG4gICAgdGhpcy5kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQnV0dG9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5nc09iamVjdCwgZm9ybUVsKSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3NPYmplY3QuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3NPYmplY3Quc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3NPYmplY3QuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzT2JqZWN0LmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5nc09iamVjdC5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsID0gZm9ybUVsO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VJbnB1dEVsID0gdGhpcy5faW5wdXRFbHM7XHJcbiAgICBlcnJvck1lc3NhZ2VJbnB1dEVsLmZvckVhY2goKGVycm9yTWVzc2FnZUlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGVycm9yTWVzc2FnZUlucHV0KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IG51bGw7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gdGhpcy5faGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlU3VibWl0KGV2dCkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGZvcm1EYXRhKTtcclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXREYXRhID0ge307XHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2lucHV0RGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXREYXRhO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgfVxyXG59XHJcbiIsIi8qKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqICAgICAgICAgIEltcG9ydCBDU1MgZm9yIFdlYnBhY2tcclxuICo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qKi9cclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuLyoqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogICAgICAgICAgSW1wb3J0IENsYXNzZXMgYW5kIE9iamVjdHNcclxuICo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qKi9cclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG4vKio9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiBQcm9maWxlIGFuZCBwcm9maWxlIG1vZGFsIHNlbGVjdG9yIHZhcmlhYmxlc1xyXG4gKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSoqL1xyXG5jb25zdCBvcGVuUHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbi8qKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqICAgICAgIENhcmQgdGVtcGxhdGUgc2VsZWN0b3IgdmFyaWFibGVzXHJcbiAqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KiovXHJcbmNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcclxuY29uc3QgY2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fY29udGFpbmVyXCIpO1xyXG5jb25zdCBvcGVuQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuLyoqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogICAgICAgICAgICBDbGFzcyBJbnN0YW50aWF0aW9uc1xyXG4gKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSoqL1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZTogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGRlc2NyaXB0aW9uOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG59KTtcclxuXHJcbmNvbnN0IHByb2ZpbGVQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNtb2RhbF9fcHJvZmlsZVwiLFxyXG4gIGhhbmRsZVByb2ZpbGVTdWJtaXRcclxuKTtcclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7IGl0ZW1zOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXHJcbiAgY2FyZENvbnRhaW5lclxyXG4pO1xyXG5jb25zdCBjYXJkUG9wdXBGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbW9kYWxfX2FkZC1jYXJkXCIsIGhhbmRsZUNhcmRTdWJtaXQpO1xyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNtb2RhbF9fcHJldmlldy13cmFwcGVyXCIpO1xyXG4vKio9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiAgICAgIFZhbGlkYXRpb24gYW5kIENhcmQgQ2xhc3MgQ2FsbHNcclxuICo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qKi9cclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcclxuXHJcbi8qKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqICAgICAgICAgICAgICAgRnVuY3Rpb25zXHJcbiAqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KiovXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoaXRlbSwgbWV0aG9kID0gXCJhcHBlbmRcIikge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5yZW5kZXJDYXJkKCk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCwgbWV0aG9kKTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGRhdGEpIHtcclxuICBwb3B1cFdpdGhJbWFnZS5vcGVuKGRhdGEpO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVTdWJtaXQodXNlckRhdGEpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICBuYW1lOiB1c2VyRGF0YS50aXRsZSxcclxuICAgIGRlc2NyaXB0aW9uOiB1c2VyRGF0YS5kZXNjcmlwdGlvbixcclxuICB9KTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkU3VibWl0KGRhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IHsgbmFtZTogZGF0YS50aXRsZSwgbGluazogZGF0YS51cmwgfTtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZEVsZW1lbnQsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljayk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkLnJlbmRlckNhcmQoKSwgXCJwcmVwZW5kXCIpO1xyXG59XHJcbi8qKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqICAgICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzXHJcbiAqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KiovXHJcbm9wZW5Qcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVQb3B1cEZvcm0uc2V0SW5wdXRWYWx1ZXModXNlckRhdGEpO1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wicHJvZmlsZS1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHByb2ZpbGVQb3B1cEZvcm0ub3BlbigpO1xyXG59KTtcclxub3BlbkNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImNhcmQtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBjYXJkUG9wdXBGb3JtLm9wZW4oKTtcclxufSk7XHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnByb2ZpbGVQb3B1cEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY2FyZFBvcHVwRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlckRhdGEpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyRGF0YS5uYW1lKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckRhdGEuZGVzY3JpcHRpb24pO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRpdGxlOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNhcmRDb250YWluZXIpIHtcclxuICAgIHRoaXMuX2NhcmRDb250YWluZXIgPSBjYXJkQ29udGFpbmVyO1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSwgXCJhcHBlbmRcIik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSwgbWV0aG9kID0gXCJhcHBlbmRcIikge1xyXG4gICAgdGhpcy5fY2FyZENvbnRhaW5lclttZXRob2RdKGl0ZW0pO1xyXG4gIH1cclxufVxyXG4iLCIvKio9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiAgICAgICAgICAgICAgIEluaXRpYWwgQ2FyZCBBcnJheVxyXG4gKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSoqL1xyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuLyoqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogICAgICAgRm9ybVZhbGlkYXRvciBDb25maWcgT2JqZWN0XHJcbiAqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KiovXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG59O1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5pbWFnZVByZXZpZXcgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuaW1hZ2VDYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19wcmV2aWV3LWNhcHRpb25cIlxyXG4gICAgKTtcclxuICB9XHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICB0aGlzLmltYWdlUHJldmlldy5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLmltYWdlUHJldmlldy5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLmltYWdlQ2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIm5hbWUiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwicmVuZGVyQ2FyZCIsImNhcmRFbGVtZW50IiwiX2dldFRlbXBsYXRlIiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwiY2FyZEltYWdlRWxlbWVudCIsImxpa2VCdXR0b24iLCJkZWxldGVCdXR0b24iLCJzcmMiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3NPYmplY3QiLCJmb3JtRWwiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9pbnB1dEVscyIsImZvckVhY2giLCJlcnJvck1lc3NhZ2VJbnB1dCIsIl9oaWRlSW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsImlucHV0RWwiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9mb3JtSW5wdXRzIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsImV2dCIsImZvcm1EYXRhIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJfaW5wdXREYXRhIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwib3BlblByb2ZpbGVCdXR0b24iLCJjYXJkQ29udGFpbmVyIiwib3BlbkNhcmRCdXR0b24iLCJ1c2VySW5mbyIsInVzZXJEYXRhIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVEZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwiZ2V0VXNlckluZm8iLCJ0aXRsZSIsInNldFVzZXJJbmZvIiwiX3JlZiIsInByb2ZpbGVQb3B1cEZvcm0iLCJjYXJkU2VjdGlvbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJfY2FyZENvbnRhaW5lciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJtZXRob2QiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjYXJkUG9wdXBGb3JtIiwidXJsIiwiY2FyZCIsInBvcHVwV2l0aEltYWdlIiwiaW1hZ2VQcmV2aWV3IiwiaW1hZ2VDYXB0aW9uIiwiZm9ybVZhbGlkYXRvcnMiLCJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJBcnJheSIsImZyb20iLCJmb3JtRWxlbWVudCIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==