!function(){"use strict";class e{constructor(e,t,s,i,r){this.card=e,this.name=e.name,this.link=e.link,this.cardID=e._id,this.isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=i,this.handleLikeClick=r}renderCard(){return this.cardElement=this._getTemplate(),this.cardElement.querySelector(".card__title").textContent=this.name,this.cardImageElement=this.cardElement.querySelector(".card__image"),this.likeButton=this.cardElement.querySelector(".card__like-button"),this.isLiked&&this.likeButton.classList.add("card__like-button_active"),this.deleteButton=this.cardElement.querySelector(".card__delete-button"),this.cardImageElement.src=this.link,this.cardImageElement.alt=this.name,this._setEventListeners(),this.cardElement}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_setEventListeners(){this.cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this)})),this.likeButton.addEventListener("click",this._handleLikeButton),this.deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this)}))}_handleLikeButton=()=>{this.likeButton.classList.contains("card__like-button_active")?this.likeButton.classList.contains("card__like-button_active")&&this.handleLikeClick(this,this.card,"removeLike"):this.handleLikeClick(this,this.card,"addLike")};addLike(e){e.likeButton.classList.add("card__like-button_active")}removeLike(e){e.likeButton.classList.remove("card__like-button_active")}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=null,t.classList.remove(this._errorClass)}_toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}}const s=document.querySelector(".profile__edit-button"),i=document.querySelector(".profile__overlay-button"),r="#card-template",n=document.querySelector(".card__container"),o=document.querySelector(".profile__add-button");class a{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()}))}}class l extends a{constructor(e,t){super(e),this._formInputs=this._popupElement.querySelectorAll(".modal__input"),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._handleSubmit=this._handleSubmit.bind(this),this._submitBtn=this._popupElement.querySelector(".modal__button"),this._submitBtnText=this._submitBtn.textContent}_handleSubmit(e){e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=e?t:this._submitBtnText}popupFormReset(){this._popupForm.reset()}_getInputValues(){return this._inputData={},this._formInputs.forEach((e=>{this._inputData[e.name]=e.value})),this._inputData}setInputValues(e){this._formInputs.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this._handleSubmit)}}class d{constructor(e,t){let{items:s,renderer:i}=e;this._cardContainer=t,this._items=s,this._renderer=i}renderItems(){this._items.forEach((e=>{this._renderer(e,"append")}))}addItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";this._cardContainer[t](e)}}const c=new class{constructor(e){this._profileName=document.querySelector(e.name),this._profileDescription=document.querySelector(e.description),this._profileAvatar=document.querySelector(e.avatar)}getUserInfo(){return{title:this._profileName.textContent,description:this._profileDescription.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._profileName.textContent=t,this._profileDescription.textContent=s}setUserAvatar(e){this._profileAvatar.src=e}}({name:".profile__name",description:".profile__description",avatar:".profile__image"}),h=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(this._baseUrl+e,t).then(this._checkResponse)}initialSite(e){let[t,s]=e;Promise.all([t,s])}getUserInfo(){return this._request("/users/me",{method:"GET",headers:this._headers})}setUserInfo(e,t){return this._request("/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})})}setAvatar(e){return this._request("/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}getInitialCards(){return this._request("/cards",{method:"GET",headers:this._headers})}addCard(e){return this._request("/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})})}deleteCard(e){return this._request(`/cards/${e}`,{method:"DELETE",headers:this._headers})}addLike(e){return this._request(`/cards/${e}/likes`,{method:"PUT",headers:this._headers})}deleteLike(e){return this._request(`/cards/${e}/likes`,{method:"DELETE",headers:this._headers})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"7d61f2da-4ddf-40b8-adec-eade6c2db478","Content-Type":"application/json"}}),u=new l("#modal__profile",(function(e){u.renderLoading(!0,"Saving..."),h.setUserInfo(e.title,e.description).then((()=>{c.setUserInfo({name:e.title,description:e.description})})).then((()=>{u.close(),u.popupFormReset()})).catch(console.error).finally((()=>{u.renderLoading(!1)}))})),_=new l("#modal__avatar",(function(e){_.renderLoading(!0,"Saving..."),h.setAvatar(e.url).then((e=>{c.setUserAvatar(e.avatar)})).then((()=>{_.close(),_.popupFormReset()})).catch(console.error).finally((()=>{_.renderLoading(!1)}))})),m=new d({},n),p=new l("#modal__add-card",(function(e){p.renderLoading(!0,"Saving...");const t={name:e.title,link:e.url};h.addCard(t).then((e=>{k(e,"prepend")})).then((()=>{p.close(),p.popupFormReset()})).catch(console.error).finally((()=>{p.renderLoading(!1)}))})),v=new class extends a{constructor(e){super(e),this.imagePreview=this._popupElement.querySelector(".modal__preview-image"),this.imageCaption=this._popupElement.querySelector(".modal__preview-caption")}open(e){this.imagePreview.src=e.link,this.imagePreview.alt=e.name,this.imageCaption.textContent=e.name,super.open()}}("#modal__preview-wrapper"),E=new class extends a{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._popupButton=this._popupElement.querySelector(".modal__button")}open(e){this._popupButton.textContent="Yes",this.cardID=e,super.open()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(()=>{this._popupButton.textContent="Saving...",this._handleFormSubmit(this.cardID)}))}}("#modal__delete-card",(function(e){h.deleteCard(e.cardID).then((()=>{e.cardElement.remove(),e.cardElement=null})).then((()=>{E.close()})).catch(console.error)})),f=new e({},r,b,S,C);Promise.all([h.getUserInfo(),h.getInitialCards()]).then((e=>{const t=e[0],s=Array.from(e[1]);!function(e){c.setUserInfo({name:e.name,description:e.about}),c.setUserAvatar(e.avatar)}(t),new d({items:s,renderer:k},n).renderItems()})).catch(console.error);const L={};function k(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";const i=new e(t,r,b,S,C).renderCard();m.addItem(i,s)}function b(e){v.open(e)}function S(e){E.open(e)}function C(e,t,s){"addLike"===s&&h.addLike(t._id).then((()=>{f.addLike(e)})).catch(console.error),"removeLike"===s&&h.deleteLike(t._id).then((()=>{f.removeLike(e)})).catch(console.error)}var g;g={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",formSelector:".modal__form"},Array.from(document.querySelectorAll(g.formSelector)).forEach((e=>{const s=new t(g,e),i=e.getAttribute("name");L[i]=s,s.enableValidation()})),s.addEventListener("click",(function(){const e=c.getUserInfo();u.setInputValues(e),L["profile-form"].resetValidation(),u.open()})),o.addEventListener("click",(()=>{L["card-form"].resetValidation(),p.open()})),i.addEventListener("click",(()=>{L["avatar-form"].resetValidation(),_.open()})),v.setEventListeners(),u.setEventListeners(),_.setEventListeners(),p.setEventListeners(),E.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V0FDMUMsTUFBTThGLEVBQVdELEVBQVNPLGNBQzFCb0MsRUFBaUJ2RCxlQUFlYSxHQUNoQzJELEVBQWUsZ0JBQWdCakksa0JBQy9CZ0gsRUFBaUJwRixNQUNuQixJQUNBTixFQUFlOUMsaUJBQWlCLFNBQVMsS0FDdkN5SixFQUFlLGFBQWFqSSxrQkFDNUJ1SCxFQUFjM0YsTUFBTSxJQUV0QlIsRUFBaUI1QyxpQkFBaUIsU0FBUyxLQUN6Q3lKLEVBQWUsZUFBZWpJLGtCQUM5QnFILEVBQWdCekYsTUFBTSxJQUV4QjRGLEVBQWV4RixvQkFDZmdGLEVBQWlCaEYsb0JBQ2pCcUYsRUFBZ0JyRixvQkFDaEJ1RixFQUFjdkYsb0JBQ2QyRixFQUFtQjNGLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBEZWxldGVDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrXHJcbiAgKSB7XHJcbiAgICB0aGlzLmNhcmQgPSBkYXRhO1xyXG4gICAgdGhpcy5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5jYXJkSUQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuaGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ2FyZCgpIHtcclxuICAgIHRoaXMuY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xyXG4gICAgdGhpcy5jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5saWtlQnV0dG9uID0gdGhpcy5jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCkge1xyXG4gICAgICB0aGlzLmxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICAgIHRoaXMuZGVsZXRlQnV0dG9uID0gdGhpcy5jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLmNhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5saW5rO1xyXG4gICAgdGhpcy5jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMubmFtZTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24pO1xyXG4gICAgdGhpcy5kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uID0gKCkgPT4ge1xyXG4gICAgaWYgKCF0aGlzLmxpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpKSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlTGlrZUNsaWNrKHRoaXMsIHRoaXMuY2FyZCwgXCJhZGRMaWtlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMubGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIikpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZUxpa2VDbGljayh0aGlzLCB0aGlzLmNhcmQsIFwicmVtb3ZlTGlrZVwiKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGFkZExpa2UoY2FyZERhdGEpIHtcclxuICAgIGNhcmREYXRhLmxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUxpa2UoY2FyZERhdGEpIHtcclxuICAgIGNhcmREYXRhLmxpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3NPYmplY3QsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzT2JqZWN0LmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzT2JqZWN0LnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzT2JqZWN0LmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5nc09iamVjdC5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3NPYmplY3QuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbDtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlSW5wdXRFbCA9IHRoaXMuX2lucHV0RWxzO1xyXG4gICAgZXJyb3JNZXNzYWdlSW5wdXRFbC5mb3JFYWNoKChlcnJvck1lc3NhZ2VJbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihlcnJvck1lc3NhZ2VJbnB1dCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBudWxsO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCIvKio9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiAgICAgICBGb3JtVmFsaWRhdG9yIENvbmZpZyBPYmplY3RcclxuICo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qKi9cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYXBpQ29uZmlnID0ge1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjdkNjFmMmRhLTRkZGYtNDBiOC1hZGVjLWVhZGU2YzJkYjQ3OFwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufTtcclxuLyoqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogUHJvZmlsZSBhbmQgcHJvZmlsZSBtb2RhbCBzZWxlY3RvciB2YXJpYWJsZXNcclxuICo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qKi9cclxuZXhwb3J0IGNvbnN0IG9wZW5Qcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBvcGVuQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19vdmVybGF5LWJ1dHRvblwiXHJcbik7XHJcbi8qKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqICAgICAgIENhcmQgdGVtcGxhdGUgc2VsZWN0b3IgdmFyaWFibGVzXHJcbiAqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KiovXHJcbmV4cG9ydCBjb25zdCBjYXJkU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XHJcbmV4cG9ydCBjb25zdCBjYXJkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19jb250YWluZXJcIik7XHJcbmV4cG9ydCBjb25zdCBvcGVuQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRFbGVtZW50ID0ge307XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gdGhpcy5faGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuVGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTdWJtaXQoZXZ0KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoZm9ybURhdGEpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ0blRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwb3B1cEZvcm1SZXNldCgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXREYXRhID0ge307XHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2lucHV0RGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXREYXRhO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNhcmRDb250YWluZXIpIHtcclxuICAgIHRoaXMuX2NhcmRDb250YWluZXIgPSBjYXJkQ29udGFpbmVyO1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSwgXCJhcHBlbmRcIik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSwgbWV0aG9kID0gXCJhcHBlbmRcIikge1xyXG4gICAgdGhpcy5fY2FyZENvbnRhaW5lclttZXRob2RdKGl0ZW0pO1xyXG4gIH1cclxufVxyXG4iLCIvKio9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiAgICAgICAgICBJbXBvcnQgQ1NTIGZvciBXZWJwYWNrXHJcbiAqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KiovXHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbi8qKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqICAgICAgICAgIEltcG9ydCBDbGFzc2VzIGFuZCBPYmplY3RzXHJcbiAqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KiovXHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGNvbmZpZyxcclxuICBhcGlDb25maWcsXHJcbiAgb3BlblByb2ZpbGVCdXR0b24sXHJcbiAgb3BlbkF2YXRhckJ1dHRvbixcclxuICBjYXJkU2VsZWN0b3IsXHJcbiAgY2FyZENvbnRhaW5lcixcclxuICBvcGVuQ2FyZEJ1dHRvbixcclxuICBjYXJkRWxlbWVudCxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cERlbGV0ZUNvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cERlbGV0ZUNvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG4vKio9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiAgICAgICAgICAgIENsYXNzIEluc3RhbnRpYXRpb25zXHJcbiAqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KiovXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgZGVzY3JpcHRpb246IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbiAgYXZhdGFyOiBcIi5wcm9maWxlX19pbWFnZVwiLFxyXG59KTtcclxuY29uc3QgYXBpID0gbmV3IEFwaShhcGlDb25maWcpO1xyXG5jb25zdCBwcm9maWxlUG9wdXBGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjbW9kYWxfX3Byb2ZpbGVcIixcclxuICBoYW5kbGVQcm9maWxlU3VibWl0XHJcbik7XHJcbmNvbnN0IGF2YXRhclBvcHVwRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI21vZGFsX19hdmF0YXJcIiwgaGFuZGxlQXZhdGFyU3VibWl0KTtcclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbih7fSwgY2FyZENvbnRhaW5lcik7XHJcbmNvbnN0IGNhcmRQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNtb2RhbF9fYWRkLWNhcmRcIiwgaGFuZGxlQ2FyZFN1Ym1pdCk7XHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI21vZGFsX19wcmV2aWV3LXdyYXBwZXJcIik7XHJcbmNvbnN0IGRlbGV0ZUNvbmZpcm1hdGlvbiA9IG5ldyBQb3B1cERlbGV0ZUNvbmZpcm1hdGlvbihcclxuICBcIiNtb2RhbF9fZGVsZXRlLWNhcmRcIixcclxuICBkZWxldGVDb25maXJtZWRcclxuKTtcclxuY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gIGNhcmRFbGVtZW50LFxyXG4gIGNhcmRTZWxlY3RvcixcclxuICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gIGhhbmRsZUxpa2VDbGlja1xyXG4pO1xyXG4vKio9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiAgICAgIFZhbGlkYXRpb24gYW5kIENhcmQgQ2xhc3MgQ2FsbHNcclxuICo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qKi9cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIGNvbnN0IHVzZXJEYXRhID0gcmVzWzBdO1xyXG4gICAgY29uc3QgY2FyZHMgPSBBcnJheS5mcm9tKHJlc1sxXSk7XHJcbiAgICBnZXRJbml0aWFsQXBpVXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgaGFuZGxlQXBpQ2FyZEluZm8oY2FyZHMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuZW5hYmxlVmFsaWRhdGlvbihjb25maWcpO1xyXG4vKio9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiAgICAgICAgICAgICAgIEZ1bmN0aW9uc1xyXG4gKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSoqL1xyXG5mdW5jdGlvbiBoYW5kbGVBcGlDYXJkSW5mbyhjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmRBcGlTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICB7IGl0ZW1zOiBjYXJkRGF0YSwgcmVuZGVyZXI6IHJlbmRlckNhcmQgfSxcclxuICAgIGNhcmRDb250YWluZXJcclxuICApO1xyXG4gIGNhcmRBcGlTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbn1cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtLCBtZXRob2QgPSBcImFwcGVuZFwiKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgaXRlbSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLnJlbmRlckNhcmQoKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50LCBtZXRob2QpO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soZGF0YSkge1xyXG4gIHBvcHVwV2l0aEltYWdlLm9wZW4oZGF0YSk7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2xpY2soY2FyZERhdGEpIHtcclxuICBkZWxldGVDb25maXJtYXRpb24ub3BlbihjYXJkRGF0YSk7XHJcbn1cclxuZnVuY3Rpb24gZGVsZXRlQ29uZmlybWVkKGNhcmQpIHtcclxuICBhcGlcclxuICAgIC5kZWxldGVDYXJkKGNhcmQuY2FyZElEKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjYXJkLmNhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICBjYXJkLmNhcmRFbGVtZW50ID0gbnVsbDtcclxuICAgIH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGRlbGV0ZUNvbmZpcm1hdGlvbi5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soY2FyZE9iaiwgY2FyZERhdGEsIGxpa2VBY3Rpb24pIHtcclxuICBpZiAobGlrZUFjdGlvbiA9PT0gXCJhZGRMaWtlXCIpIHtcclxuICAgIGFwaVxyXG4gICAgICAuYWRkTGlrZShjYXJkRGF0YS5faWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLmFkZExpa2UoY2FyZE9iaik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICB9XHJcbiAgaWYgKGxpa2VBY3Rpb24gPT09IFwicmVtb3ZlTGlrZVwiKSB7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUxpa2UoY2FyZERhdGEuX2lkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5yZW1vdmVMaWtlKGNhcmRPYmopO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRJbml0aWFsQXBpVXNlckluZm8odXNlckRhdGEpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxyXG4gICAgZGVzY3JpcHRpb246IHVzZXJEYXRhLmFib3V0LFxyXG4gIH0pO1xyXG4gIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZVN1Ym1pdCh1c2VyRGF0YSkge1xyXG4gIHByb2ZpbGVQb3B1cEZvcm0ucmVuZGVyTG9hZGluZyh0cnVlLCBcIlNhdmluZy4uLlwiKTtcclxuICBhcGlcclxuICAgIC5zZXRVc2VySW5mbyh1c2VyRGF0YS50aXRsZSwgdXNlckRhdGEuZGVzY3JpcHRpb24pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgICBuYW1lOiB1c2VyRGF0YS50aXRsZSxcclxuICAgICAgICBkZXNjcmlwdGlvbjogdXNlckRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgcHJvZmlsZVBvcHVwRm9ybS5jbG9zZSgpO1xyXG4gICAgICBwcm9maWxlUG9wdXBGb3JtLnBvcHVwRm9ybVJlc2V0KCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVQb3B1cEZvcm0ucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWJtaXQoZGF0YSkge1xyXG4gIGF2YXRhclBvcHVwRm9ybS5yZW5kZXJMb2FkaW5nKHRydWUsIFwiU2F2aW5nLi4uXCIpO1xyXG4gIGFwaVxyXG4gICAgLnNldEF2YXRhcihkYXRhLnVybClcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMuYXZhdGFyKTtcclxuICAgIH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGF2YXRhclBvcHVwRm9ybS5jbG9zZSgpO1xyXG4gICAgICBhdmF0YXJQb3B1cEZvcm0ucG9wdXBGb3JtUmVzZXQoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYXZhdGFyUG9wdXBGb3JtLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZFN1Ym1pdChkYXRhKSB7XHJcbiAgY2FyZFBvcHVwRm9ybS5yZW5kZXJMb2FkaW5nKHRydWUsIFwiU2F2aW5nLi4uXCIpO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0geyBuYW1lOiBkYXRhLnRpdGxlLCBsaW5rOiBkYXRhLnVybCB9O1xyXG4gIGFwaVxyXG4gICAgLmFkZENhcmQoY2FyZEVsZW1lbnQpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJlbmRlckNhcmQocmVzLCBcInByZXBlbmRcIik7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjYXJkUG9wdXBGb3JtLmNsb3NlKCk7XHJcbiAgICAgIGNhcmRQb3B1cEZvcm0ucG9wdXBGb3JtUmVzZXQoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY2FyZFBvcHVwRm9ybS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcbi8qKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqICAgICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzXHJcbiAqPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KiovXHJcbm9wZW5Qcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVQb3B1cEZvcm0uc2V0SW5wdXRWYWx1ZXModXNlckRhdGEpO1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wicHJvZmlsZS1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHByb2ZpbGVQb3B1cEZvcm0ub3BlbigpO1xyXG59KTtcclxub3BlbkNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImNhcmQtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBjYXJkUG9wdXBGb3JtLm9wZW4oKTtcclxufSk7XHJcbm9wZW5BdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImF2YXRhci1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGF2YXRhclBvcHVwRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wcm9maWxlUG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmF2YXRhclBvcHVwRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jYXJkUG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmRlbGV0ZUNvbmZpcm1hdGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlckRhdGEpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyRGF0YS5uYW1lKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckRhdGEuZGVzY3JpcHRpb24pO1xyXG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckRhdGEuYXZhdGFyKTtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0aXRsZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBfcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgdXJsLCBvcHRpb25zKS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbFNpdGUoW2dldFVzZXJJbmZvLCBnZXRDYXJkSW5mb10pIHtcclxuICAgIFByb21pc2UuYWxsKFtnZXRVc2VySW5mbywgZ2V0Q2FyZEluZm9dKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXCIvdXNlcnMvbWVcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi91c2Vycy9tZVwiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGFib3V0IH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIoYXZhdGFyVXJsKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi91c2Vycy9tZS9hdmF0YXJcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IGF2YXRhclVybCB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXCIvY2FyZHNcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoY2FyZERhdGEpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFwiL2NhcmRzXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiBjYXJkRGF0YS5uYW1lLCBsaW5rOiBjYXJkRGF0YS5saW5rIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJRCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYC9jYXJkcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShjYXJkSUQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvY2FyZHMvJHtjYXJkSUR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUxpa2UoY2FyZElEKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgL2NhcmRzLyR7Y2FyZElEfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLmltYWdlUHJldmlldyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5pbWFnZUNhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX3ByZXZpZXctY2FwdGlvblwiXHJcbiAgICApO1xyXG4gIH1cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHRoaXMuaW1hZ2VQcmV2aWV3LnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuaW1hZ2VQcmV2aWV3LmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuaW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwRGVsZXRlQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3BvcHVwQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oY2FyZElEKSB7XHJcbiAgICB0aGlzLl9wb3B1cEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiWWVzXCI7XHJcbiAgICB0aGlzLmNhcmRJRCA9IGNhcmRJRDtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fcG9wdXBCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuY2FyZElEKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJjYXJkIiwibmFtZSIsImxpbmsiLCJjYXJkSUQiLCJfaWQiLCJpc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwicmVuZGVyQ2FyZCIsImNhcmRFbGVtZW50IiwiX2dldFRlbXBsYXRlIiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwiY2FyZEltYWdlRWxlbWVudCIsImxpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJkZWxldGVCdXR0b24iLCJzcmMiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsImNvbnRhaW5zIiwiYWRkTGlrZSIsImNhcmREYXRhIiwicmVtb3ZlTGlrZSIsInJlbW92ZSIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5nc09iamVjdCIsImZvcm1FbCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWwiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lucHV0RWxzIiwiZm9yRWFjaCIsImVycm9yTWVzc2FnZUlucHV0IiwiX2hpZGVJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImV2ZXJ5IiwiaW5wdXRFbCIsInZhbGlkaXR5IiwidmFsaWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwicXVlcnlTZWxlY3RvckFsbCIsIm9wZW5Qcm9maWxlQnV0dG9uIiwib3BlbkF2YXRhckJ1dHRvbiIsImNhcmRDb250YWluZXIiLCJvcGVuQ2FyZEJ1dHRvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9mb3JtSW5wdXRzIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsIl9zdWJtaXRCdG4iLCJfc3VibWl0QnRuVGV4dCIsImV2dCIsImZvcm1EYXRhIiwiX2dldElucHV0VmFsdWVzIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwicG9wdXBGb3JtUmVzZXQiLCJyZXNldCIsIl9pbnB1dERhdGEiLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJTZWN0aW9uIiwiX3JlZiIsIml0ZW1zIiwicmVuZGVyZXIiLCJfY2FyZENvbnRhaW5lciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJtZXRob2QiLCJ1c2VySW5mbyIsInVzZXJEYXRhIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVEZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwiX3Byb2ZpbGVBdmF0YXIiLCJhdmF0YXIiLCJnZXRVc2VySW5mbyIsInRpdGxlIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwiYXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiX3JlcXVlc3QiLCJ1cmwiLCJvcHRpb25zIiwiZmV0Y2giLCJ0aGVuIiwiaW5pdGlhbFNpdGUiLCJfcmVmMiIsImdldENhcmRJbmZvIiwiYWxsIiwiYWJvdXQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNldEF2YXRhciIsImF2YXRhclVybCIsImdldEluaXRpYWxDYXJkcyIsImFkZENhcmQiLCJkZWxldGVDYXJkIiwiZGVsZXRlTGlrZSIsImF1dGhvcml6YXRpb24iLCJwcm9maWxlUG9wdXBGb3JtIiwiY2F0Y2giLCJjb25zb2xlIiwiZXJyb3IiLCJmaW5hbGx5IiwiYXZhdGFyUG9wdXBGb3JtIiwiY2FyZFNlY3Rpb24iLCJjYXJkUG9wdXBGb3JtIiwicG9wdXBXaXRoSW1hZ2UiLCJpbWFnZVByZXZpZXciLCJpbWFnZUNhcHRpb24iLCJkZWxldGVDb25maXJtYXRpb24iLCJfcG9wdXBCdXR0b24iLCJjYXJkcyIsIkFycmF5IiwiZnJvbSIsImdldEluaXRpYWxBcGlVc2VySW5mbyIsImZvcm1WYWxpZGF0b3JzIiwiY2FyZE9iaiIsImxpa2VBY3Rpb24iLCJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJmb3JtRWxlbWVudCIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==